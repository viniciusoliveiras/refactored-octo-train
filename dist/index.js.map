{"version":3,"file":"index.js","sources":["../src/components/FeedbackWidget/CloseButton.tsx","../src/components/FeedbackWidget/WidgetForm/Steps/FeedbackTypeStep.tsx","../src/components/FeedbackWidget/Loading.tsx","../src/components/FeedbackWidget/WidgetForm/ScreenshotButton.tsx","../src/components/FeedbackWidget/WidgetForm/Steps/FeedbackContentStep.tsx","../src/components/FeedbackWidget/WidgetForm/Steps/FeedbackSuccessStep.tsx","../src/components/FeedbackWidget/WidgetForm/index.tsx","../src/components/FeedbackWidget/Widget.tsx","../src/index.tsx"],"sourcesContent":["import { Popover } from '@headlessui/react'\nimport { X } from 'phosphor-react'\n\nexport function CloseButton() {\n  return (\n    <Popover.Button\n      className='absolute top-5 right-5 text-zinc-400 hover:text-zinc-100'\n      title='Fechar formulário de feedback'\n    >\n      <X className='h-4 w-4' weight='bold' />\n    </Popover.Button>\n  )\n}\n","import { FeedbackType, feedbackTypes } from '..';\nimport { CloseButton } from '../../CloseButton';\n\ninterface Props {\n  onFeedbackTypeChange: (feedbackType: FeedbackType) => void;\n}\n\nexport function FeedbackTypeStep({ onFeedbackTypeChange }: Props) {\n  return (\n    <>\n      <header>\n        <span className=\"text-xl leading-6\">Deixe seu feedback</span>\n        <CloseButton />\n      </header>\n\n      <div className=\"flex w-full gap-2 py-8\">\n        {Object.entries(feedbackTypes).map(([type, { title, image }]) => (\n          <button\n            key={type}\n            type=\"button\"\n            className=\"flex w-24 flex-1 flex-col items-center gap-2 rounded-lg border-2 border-transparent bg-zinc-800 py-5 hover:border-brand-500 focus:border-brand-500 focus:outline-none\"\n            onClick={() => onFeedbackTypeChange(type as FeedbackType)}\n          >\n            <img src={image.source} alt={image.alt} />\n            <span>{title}</span>\n          </button>\n        ))}\n      </div>\n    </>\n  );\n}\n","import { CircleNotch } from 'phosphor-react'\n\nexport function Loading() {\n  return (\n    <div className='flex h-6 w-6 items-center justify-center overflow-hidden'>\n      <CircleNotch weight='bold' className='h-4 w-4 animate-spin' />\n    </div>\n  )\n}\n","import html2canvas from 'html2canvas';\nimport { Camera, Trash } from 'phosphor-react';\nimport { useState } from 'react';\nimport { Loading } from '../Loading';\n\ninterface Props {\n  screenshot: string | null;\n  onScreenshotTook: (screenshot: string | null) => void;\n}\n\nexport function ScreenshotButton({ screenshot, onScreenshotTook }: Props) {\n  const [isTakingScreenshot, setIsTakingScreenshot] = useState(false);\n\n  const handleTakeScreenshot = async () => {\n    setIsTakingScreenshot(true);\n\n    const canvas = await html2canvas(document.querySelector('html')!);\n    const base64image = canvas.toDataURL('image/png');\n\n    onScreenshotTook(base64image);\n\n    setIsTakingScreenshot(false);\n  };\n\n  if (screenshot) {\n    return (\n      <button\n        type=\"button\"\n        onClick={() => {\n          onScreenshotTook(null);\n        }}\n        className=\"flex h-10 w-10 items-end justify-end rounded border-transparent p-1 text-zinc-400 transition-colors hover:text-zinc-100\"\n        style={{\n          backgroundImage: `url(${screenshot})`,\n          backgroundPosition: 'right bottom',\n          backgroundSize: 180,\n        }}\n      >\n        <Trash weight=\"fill\" />\n      </button>\n    );\n  }\n\n  return (\n    <button\n      type=\"button\"\n      className=\"rounded border-transparent bg-zinc-800 p-2 transition-colors hover:bg-zinc-700 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 focus:ring-offset-zinc-900\"\n      onClick={handleTakeScreenshot}\n    >\n      {isTakingScreenshot ? <Loading /> : <Camera className=\"h-6 w-6\" />}\n    </button>\n  );\n}\n","import { ArrowLeft } from 'phosphor-react'\nimport { FormEvent, useState } from 'react'\nimport { FeedbackType, feedbackTypes } from '..'\nimport { CloseButton } from '../../CloseButton'\nimport { ScreenshotButton } from '../ScreenshotButton'\n\ninterface Props {\n  feedbackType: FeedbackType\n  onFeedbackRestartRequest: () => void\n  onFeedbackSent: () => void\n}\n\nexport function FeedbackContentStep({\n  feedbackType,\n  onFeedbackRestartRequest,\n  onFeedbackSent\n}: Props) {\n  const [screenshot, setScreenshot] = useState<string | null>(null)\n  const [comment, setComment] = useState('')\n\n  const { image, title } = feedbackTypes[feedbackType]\n\n  const resetFeedbackForm = () => {\n    setScreenshot(null)\n    setComment('')\n  }\n\n  const handleFeedbackSubmit = (event: FormEvent) => {\n    event.preventDefault()\n    console.log({ screenshot, comment })\n    onFeedbackSent()\n    resetFeedbackForm()\n  }\n\n  return (\n    <>\n      <header>\n        <button\n          type='button'\n          className='absolute top-5 left-5 text-zinc-400 hover:text-zinc-100'\n          onClick={onFeedbackRestartRequest}\n        >\n          <ArrowLeft weight='bold' className='h-4 w-4' />\n        </button>\n        <span className='flex items-center gap-2 text-xl leading-6'>\n          <img src={image.source} alt={image.alt} className='h-6 w-6' /> {title}\n        </span>\n\n        <CloseButton />\n      </header>\n\n      <form className='my-4 w-full' onSubmit={handleFeedbackSubmit}>\n        <textarea\n          className='min-h-[112px] w-full min-w-[304px] resize-none rounded-md border border-zinc-600 bg-transparent py-2 px-3 text-sm text-zinc-200 placeholder-zinc-400 scrollbar-thin scrollbar-track-transparent scrollbar-thumb-zinc-700 focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500'\n          placeholder='Conte com detalhes o que está acontecendo...'\n          value={comment}\n          onChange={({ target: { value } }) => setComment(value)}\n        />\n\n        <footer className='mt-2 flex gap-2'>\n          <ScreenshotButton\n            screenshot={screenshot}\n            onScreenshotTook={setScreenshot}\n          />\n\n          <button\n            type='submit'\n            className='flex-1 items-center justify-center rounded border-transparent bg-brand-500 p-2 text-sm transition-colors hover:bg-brand-300 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 focus:ring-offset-zinc-900 disabled:cursor-not-allowed disabled:opacity-50 hover:disabled:bg-brand-500'\n            disabled={comment.trim() === ''}\n          >\n            Enviar feedback\n          </button>\n        </footer>\n      </form>\n    </>\n  )\n}\n","import { CloseButton } from '../../CloseButton';\n\ninterface Props {\n  onFeedbackRestartRequest: () => void;\n}\n\nexport function FeedbackSuccessStep({ onFeedbackRestartRequest }: Props) {\n  return (\n    <>\n      <header>\n        <CloseButton />\n      </header>\n\n      <div className=\"flex w-[304px] flex-col items-center py-10\">\n        <svg\n          width=\"37\"\n          height=\"36\"\n          viewBox=\"0 0 37 36\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            d=\"M36.5 32C36.5 34.209 34.709 36 32.5 36H4.5C2.291 36 0.5 34.209 0.5 32V4C0.5 1.791 2.291 0 4.5 0H32.5C34.709 0 36.5 1.791 36.5 4V32Z\"\n            fill=\"#77B255\"\n          />\n          <path\n            d=\"M29.78 6.36202C28.624 5.61102 27.076 5.94002 26.322 7.09802L15.436 23.877L10.407 19.227C9.39303 18.289 7.81103 18.352 6.87403 19.365C5.93703 20.379 5.99903 21.961 7.01303 22.898L14.222 29.564C14.702 30.009 15.312 30.229 15.918 30.229C16.591 30.229 17.452 29.947 18.017 29.09C18.349 28.584 30.517 9.82002 30.517 9.82002C31.268 8.66102 30.938 7.11302 29.78 6.36202Z\"\n            fill=\"white\"\n          />\n        </svg>\n\n        <span className=\"mt-2 text-xl\">Agradecemos o feedback!</span>\n\n        <button\n          className=\"mt-6 rounded border-transparent bg-zinc-800 py-2 px-6 text-sm leading-6 transition-colors hover:bg-zinc-700 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 focus:ring-offset-zinc-900 disabled:cursor-not-allowed disabled:opacity-50 hover:disabled:bg-brand-500\"\n          onClick={onFeedbackRestartRequest}\n        >\n          Quero enviar outro\n        </button>\n      </div>\n    </>\n  );\n}\n","import { useEffect, useState } from 'react';\n\nimport { CloseButton } from '../CloseButton';\n\nimport bugImageUrl from '../assets/bug.svg';\nimport ideaImageUrl from '../assets/idea.svg';\nimport thoughtImageUrl from '../assets/thought.svg';\nimport { FeedbackTypeStep } from './Steps/FeedbackTypeStep';\nimport { FeedbackContentStep } from './Steps/FeedbackContentStep';\nimport { FeedbackSuccessStep } from './Steps/FeedbackSuccessStep';\n\nexport const feedbackTypes = {\n  BUG: {\n    title: 'Problema',\n    image: {\n      source: bugImageUrl,\n      alt: 'Imagem de um inseto',\n    },\n  },\n  IDEA: {\n    title: 'Ideia',\n    image: {\n      source: ideaImageUrl,\n      alt: 'Imagem de uma lampada',\n    },\n  },\n  OTHER: {\n    title: 'Outro',\n    image: {\n      source: thoughtImageUrl,\n      alt: 'Imagem de um balão de pensamento',\n    },\n  },\n};\n\nexport type FeedbackType = keyof typeof feedbackTypes;\n\nexport function WidgetForm() {\n  const [feedbackType, setFeedbackType] = useState<FeedbackType | null>(null);\n  const [feedbackSent, setFeedbackSent] = useState(false);\n\n  const handleRestartFeedback = () => {\n    setFeedbackSent(false);\n    setFeedbackType(null);\n  };\n\n  return (\n    <div className=\"relative mb-4 flex w-[calc(100vw-2rem)] flex-col items-center rounded-2xl bg-zinc-900 p-4 shadow-lg md:w-auto\">\n      {feedbackSent ? (\n        <FeedbackSuccessStep onFeedbackRestartRequest={handleRestartFeedback} />\n      ) : (\n        <>\n          {!feedbackType ? (\n            <FeedbackTypeStep onFeedbackTypeChange={setFeedbackType} />\n          ) : (\n            <FeedbackContentStep\n              feedbackType={feedbackType}\n              onFeedbackRestartRequest={handleRestartFeedback}\n              onFeedbackSent={() => setFeedbackSent(true)}\n            />\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","import { ChatTeardropDots } from 'phosphor-react'\nimport { Popover } from '@headlessui/react'\n\nimport { WidgetForm } from './WidgetForm'\n\nexport function Widget() {\n  return (\n    <Popover className='absolute bottom-4 right-4 flex flex-col items-end md:bottom-8 md:right-8'>\n      <Popover.Panel>\n        <WidgetForm />\n      </Popover.Panel>\n\n      <Popover.Button className='group flex h-12 items-center rounded-full bg-brand-500 px-3 text-white'>\n        <ChatTeardropDots className='h-6 w-6' />\n\n        <span className='max-w-0 overflow-hidden transition-all duration-500 ease-linear group-hover:max-w-xs'>\n          <span className='pl-2'>Feedback</span>\n        </span>\n      </Popover.Button>\n    </Popover>\n  )\n}\n","import * as React from 'react';\nimport './tailwind.css';\n\ninterface Props {\n  text: string;\n}\n\nexport const ExampleComponent = ({ text }: Props) => {\n  return (\n    <div className=\"bg-red-300 text-black p-4\">Example Component: {text}</div>\n  );\n};\n\nexport * from './components';\n"],"names":["CloseButton","Popover","X","FeedbackTypeStep","onFeedbackTypeChange","Object","entries","feedbackTypes","map","type","title","image","source","alt","Loading","CircleNotch","ScreenshotButton","screenshot","onScreenshotTook","useState","isTakingScreenshot","setIsTakingScreenshot","handleTakeScreenshot","html2canvas","document","querySelector","canvas","base64image","toDataURL","backgroundImage","backgroundPosition","backgroundSize","Trash","Camera","FeedbackContentStep","feedbackType","onFeedbackRestartRequest","onFeedbackSent","setScreenshot","comment","setComment","resetFeedbackForm","handleFeedbackSubmit","event","preventDefault","console","log","ArrowLeft","value","target","trim","FeedbackSuccessStep","BUG","bugImageUrl","IDEA","ideaImageUrl","OTHER","thoughtImageUrl","WidgetForm","setFeedbackType","feedbackSent","setFeedbackSent","handleRestartFeedback","Widget","ChatTeardropDots","ExampleComponent","text","React.createElement"],"mappings":"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"}